puzzle_input := read() . lines filter len map (map int);

largestJoltage := memoize(\amt, start, l -> (
  if (amt > (l.len - start)) return 0;
  if (amt == 0) return 0;
  a := largestJoltage(amt, start + 1, l);
  b := largestJoltage(amt - 1, start + 1, l) + l[start] * (10 ^ (amt - 1));
  a max b
));

sum(puzzle_input map (\x -> largestJoltage(2, 0, x)))
